---
 
---

<!-- ═══════════════════════════════════
     FILTER BAR (styled like newer variant)
     Keeps all functional hooks (ids/classes/data-*)
════════════════════════════════════ -->
<section class="filters filter-bar" id="filterBar">

  <!-- ROW 1: Class · Role · Rarity · Search · Reset -->
  <div class="filter-row filter-row--main">

    <!-- CLASS FILTER -->
    <div class="filter-group">
      <span class="filter-label">Class</span>
      <div class="chip-row">
        <button class="chip class-chip" data-class="tank" title="Tank">
          <img src="/icons/classes/tank.webp" alt="Tank" />
        </button>

        <button class="chip class-chip" data-class="warrior" title="Warrior">
          <img src="/icons/classes/warrior.webp" alt="Warrior" />
        </button>

        <button class="chip class-chip" data-class="archer" title="Archer">
          <img src="/icons/classes/archer.webp" alt="Archer" />
        </button>

        <button class="chip class-chip" data-class="mage" title="Mage">
          <img src="/icons/classes/mage.webp" alt="Mage" />
        </button>

        <button class="chip class-chip" data-class="support" title="Support">
          <img src="/icons/classes/support.webp" alt="Support" />
        </button>

        <button class="chip class-chip" data-class="assassin" title="Assassin">
          <img src="/icons/classes/assassin.webp" alt="Assassin" />
        </button>
      </div>
    </div>

    <div class="filter-divider"></div>

    <!-- ROLE FILTER -->
    <div class="filter-group">
      <span class="filter-label">Role</span>
      <div class="chip-row">
        <button class="chip role-chip" data-role="nimble" title="Nimble">
          <img src="/icons/roles/nimble.webp" alt="Nimble" />
        </button>

        <button class="chip role-chip" data-role="arcane" title="Arcane">
          <img src="/icons/roles/arcane.webp" alt="Arcane" />
        </button>

        <button class="chip role-chip" data-role="hefty" title="Hefty">
          <img src="/icons/roles/hefty.webp" alt="Hefty" />
        </button>
      </div>
    </div>

    <div class="filter-divider"></div>

    <!-- RARITY FILTER -->
    <div class="filter-group">
      <span class="filter-label">Rarity</span>
      <div class="chip-row">
        <button class="chip rarity-chip common" data-rarity="common" title="Common">
          <svg viewBox="0 0 24 24" class="rarity-star">
            <path d="M12 2l2.9 6.1 6.7.6-5 4.5 1.5 6.6L12 16.8 5.9 19.8 7.4 13.2 2.4 8.7l6.7-.6L12 2z"/>
          </svg>
        </button>

        <button class="chip rarity-chip epic" data-rarity="epic" title="Epic">
          <svg viewBox="0 0 24 24" class="rarity-star">
            <path d="M12 2l2.9 6.1 6.7.6-5 4.5 1.5 6.6L12 16.8 5.9 19.8 7.4 13.2 2.4 8.7l6.7-.6L12 2z"/>
          </svg>
        </button>

        <button class="chip rarity-chip legendary" data-rarity="legendary" title="Legendary">
          <svg viewBox="0 0 24 24" class="rarity-star">
            <path d="M12 2l2.9 6.1 6.7.6-5 4.5 1.5 6.6L12 16.8 5.9 19.8 7.4 13.2 2.4 8.7l6.7-.6L12 2z"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="filter-divider"></div>

    <!-- SEARCH -->
    <div class="filter-group filter-group--search">
      <span class="filter-label">Search</span>
      <div class="search-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
        </svg>
        <input
          type="text"
          id="searchInput"
          placeholder="Search hero..."
          class="search-input"
        />
        <!-- optional: falls dein JS das nutzt (stört sonst nicht) -->
        <button class="search-clear" id="searchClear" aria-label="Clear search" type="button">✕</button>
      </div>
    </div>

    <!-- RESET -->
    <div class="filter-group filter-group--reset">
      <span class="filter-label">&nbsp;</span>
      <button id="resetFilters" class="reset-button" type="button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" aria-hidden="true">
          <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
          <path d="M3 3v5h5"/>
        </svg>
        Reset Filters
      </button>
    </div>

  </div>

  <!-- ROW 2: Faction & Tags -->
  <div class="filter-row filter-row--faction">
    <div class="filter-group">
      <span class="filter-label">Faction</span>
        <div class="chip-row">
          <button class="chip faction-chip" data-faction="hearts" title="hearts">
            <img src="/icons/factions/hearts.webp" alt="hearts" />
            <span class="faction-name">Hearts</span>
          </button>

          <button class="chip faction-chip" data-faction="clubs" title="clubs">
            <img src="/icons/factions/clubs.webp" alt="clubs" />
            <span class="faction-name">Clubs</span>
          </button>

          <button class="chip faction-chip" data-faction="diamonds" title="diamonds">
            <img src="/icons/factions/diamonds.webp" alt="diamonds" />
            <span class="faction-name">Diamonds</span>
          </button>

          <button class="chip faction-chip" data-faction="spades" title="spades">
            <img src="/icons/factions/spades.webp" alt="spades" />
            <span class="faction-name">Spades</span>
          </button>

          <button class="chip faction-chip" data-faction="starglint" title="starglint">
            <img src="/icons/factions/starglint.webp" alt="starglint" />
            <span class="faction-name">Starglint</span>
          </button>
        </div>
        </div>
    <!-- ROW 3: Tags (Index-only filter) -->
    <!-- TAG FILTER (Index only) -->
    <div class="filter-group">
      <span class="filter-label">Tags</span>

      <div class="tag-scroll">
        <div class="chip-row chip-row--tags">
          <!-- deine tag buttons -->
          <button class="chip tag-chip tag-allyheal" data-tag="ally heal" type="button">Ally Heal</button>
          <button class="chip tag-chip tag-selfheal" data-tag="self heal" type="button">Self Heal</button>
          <button class="chip tag-chip tag-antiheal" data-tag="anti-heal" type="button">Anti-Heal</button>

          <button class="chip tag-chip tag-shield" data-tag="shield" type="button">Shield</button>
          <button class="chip tag-chip tag-cleanse" data-tag="cleanse" type="button">Cleanse</button>
          <button class="chip tag-chip tag-control" data-tag="control" type="button">Control</button>

          <button class="chip tag-chip tag-aoe" data-tag="aoe" type="button">AoE</button>
          <button class="chip tag-chip tag-energy" data-tag="energy" type="button">Energy</button>
          <button class="chip tag-chip tag-cooldown" data-tag="cooldown" type="button">Cooldown</button>

          <button class="chip tag-chip tag-backline" data-tag="backline" type="button">Backline</button>
          <button class="chip tag-chip tag-shred" data-tag="def down" type="button">Def Down</button>
        </div>
      </div>
    </div>
  </div>

</section>

<style>

/* ── TAG CHIPS (Index-only visuals) ───────────────────── */
/* Wrapper für den Scroll-Fade */
.tag-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  max-width: 100%;
  padding-bottom: 4px; /* damit scrollbar nicht “klebt” */
  flex-wrap: nowrap;
  scrollbar-width: none; /* Firefox */
}

.tag-scroll::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}
/* Default: darf auf großen Screens gern wrappen */
.chip-row--tags {
  flex-wrap: wrap;
}

/* Ab schmalerem Screen: NICHT mehr wrappen, sondern scrollen */
@media (max-width: 1100px) {
  .chip-row--tags {
    flex-wrap: nowrap;

    /* bisschen Luft unten, falls Scrollbar erscheint */
    padding-bottom: 6px;

    /* optional: kleine “snap”-Hilfe beim Scrollen */
    scroll-snap-type: x proximity;
  }

  /* Chips sollen nicht schrumpfen, damit der Scroll Sinn macht */
  .chip-row--tags .tag-chip {
    flex: 0 0 auto;
    white-space: nowrap;
    scroll-snap-align: start;
  }

  /* Scrollbar möglichst unauffällig */
  .chip-row--tags::-webkit-scrollbar { height: 8px; }
  .chip-row--tags::-webkit-scrollbar-track { background: transparent; }
  .chip-row--tags::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.12);
    border-radius: 999px;
  }
  .chip-row--tags:hover::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.20);
  }

  /* Fade links/rechts (damit “abgeschnitten” edel wirkt) */
  .tag-scroll::before,
  .tag-scroll::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 6px; /* passt zur padding-bottom der row */
    width: 28px;
    pointer-events: none;
    z-index: 2;
  }

  .tag-scroll::before {
    left: 0;
    background: linear-gradient(to right, rgba(18,16,26,0.97), rgba(18,16,26,0));
  }

  .tag-scroll::after {
    right: 0;
    background: linear-gradient(to left, rgba(18,16,26,0.97), rgba(18,16,26,0));
  }
}
/* Basis: bleibt kompatibel zu .chip */
.tag-chip {
  opacity: 0.85; /* etwas sichtbarer als normale chips */
  height: 32px;
}

/* Active darf NICHT die Tag-Farbe verlieren */
.tag-chip.active {
  opacity: 1;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.14), 0 4px 12px rgba(0,0,0,0.35);
}

/* Farben (wie deine badges) */
.tag-allyheal, .tag-selfheal { background: rgba(16,185,129,.18); border-color: rgba(16,185,129,.35); }
.tag-antiheal { background: rgba(239,68,68,.18); border-color: rgba(239,68,68,.35); }

.tag-shield  { background: rgba(59,130,246,.18); border-color: rgba(59,130,246,.35); }
.tag-cleanse { background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.32); }
.tag-control { background: rgba(168,85,247,.18); border-color: rgba(168,85,247,.35); }

.tag-aoe      { background: rgba(245,158,11,.18); border-color: rgba(245,158,11,.35); }
.tag-energy   { background: rgba(250,204,21,.18); border-color: rgba(250,204,21,.35); }
.tag-cooldown { background: rgba(99,102,241,.18); border-color: rgba(99,102,241,.35); }

.tag-backline { background: rgba(244,63,94,.18); border-color: rgba(244,63,94,.35); }
.tag-shred    { background: rgba(148,163,184,.18); border-color: rgba(148,163,184,.35); }

/* Wichtig: wenn .chip.active background setzt → Tag-Farbe wiederherstellen */
.tag-chip.active.tag-allyheal,
.tag-chip.active.tag-selfheal { background: rgba(16,185,129,.22); border-color: rgba(16,185,129,.45); }

.tag-chip.active.tag-antiheal { background: rgba(239,68,68,.22); border-color: rgba(239,68,68,.45); }

.tag-chip.active.tag-shield   { background: rgba(59,130,246,.22); border-color: rgba(59,130,246,.45); }
.tag-chip.active.tag-cleanse  { background: rgba(34,197,94,.20); border-color: rgba(34,197,94,.42); }
.tag-chip.active.tag-control  { background: rgba(168,85,247,.22); border-color: rgba(168,85,247,.45); }

.tag-chip.active.tag-aoe      { background: rgba(245,158,11,.22); border-color: rgba(245,158,11,.45); }
.tag-chip.active.tag-energy   { background: rgba(250,204,21,.22); border-color: rgba(250,204,21,.45); }
.tag-chip.active.tag-cooldown { background: rgba(99,102,241,.22); border-color: rgba(99,102,241,.45); }

.tag-chip.active.tag-backline { background: rgba(244,63,94,.22); border-color: rgba(244,63,94,.45); }
.tag-chip.active.tag-shred    { background: rgba(148,163,184,.22); border-color: rgba(148,163,184,.45); }

/* (Optional) keep existing wrapper helper if you use it elsewhere */
.content-wrapper {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 16px;
}

/* ── FILTER BAR ───────────────────────────────────────── */
.filter-bar {
  position: relative;
  background:
    linear-gradient(to bottom, rgba(35,32,48,0.90), rgba(18,16,26,0.97));
  padding: 16px 24px 12px;
  border-radius: 18px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -1px 0 rgba(0,0,0,0.6),
    0 20px 50px rgba(0,0,0,0.75);
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 100;
}

/* Blur on ::before to avoid stacking-context surprises */
.filter-bar::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 18px;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  z-index: -1;
  pointer-events: none;
}

.filter-row {
  display: flex;
  align-items: flex-end;
  flex-wrap: wrap;
  gap: 4px 16px;
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

.filter-row--faction {
  display: flex;
  flex-wrap: nowrap;          /* verhindert Umbruch */
  align-items: flex-start;
  gap: 16px;
  margin-top: 8px;
}

.filter-row--faction > .filter-group {
  flex: 0 0 auto;             /* keine 100%-Basis */
  min-width: 0;               /* wichtig für overflow children */
}

/* ── GROUPS ───────────────────────────────────────────── */
.filter-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.filter-group--search {
  flex: 1;
  min-width: 180px;
  max-width: 300px;
}

.filter-group--reset {
  flex-shrink: 0;
}

.filter-group--wide {
  width: 100%;
}

.filter-label {
  font-size: 0.65rem;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  opacity: 0.4;
  padding-left: 2px;
  line-height: 1;
}

.chip-row {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: wrap;
}

.filter-divider {
  width: 1px;
  height: 36px;
  background: rgba(255,255,255,0.08);
  align-self: flex-end;
  margin-bottom: 4px;
  flex-shrink: 0;
}

/* ── BASE CHIP ────────────────────────────────────────── */
.chip {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 8px;
  padding: 5px;
  cursor: pointer;
  color: #e6e6eb;
  opacity: 0.5;
  transition: opacity 0.18s, transform 0.15s, border-color 0.18s, box-shadow 0.18s, background 0.18s;
  display: flex;
  align-items: center;
  gap: 5px;
}

.chip:hover {
  opacity: 0.85;
  transform: translateY(-1px);
  border-color: rgba(255,255,255,0.2);
}

.chip.active {
  opacity: 1;
  border-color: rgba(255,255,255,0.35);
  background: rgba(255,255,255,0.09);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.12), 0 4px 12px rgba(0,0,0,0.4);
}

/* ── CLASS & ROLE CHIPS ───────────────────────────────── */
.class-chip img,
.role-chip img {
  width: 30px;
  height: 30px;
  filter: grayscale(100%) brightness(1.1);
  transition: filter 0.18s;
}

.class-chip:hover img, .class-chip.active img,
.role-chip:hover img,  .role-chip.active img {
  filter: brightness(1.4);
}

/* ── FACTION CHIPS ────────────────────────────────────── */
.faction-chip, .tag-chip {
  border-radius: 20px;
  padding: 4px 10px 4px 5px;
}

.faction-chip img {
  width: 22px;
  height: 22px;
  filter: grayscale(60%) brightness(1.1);
  transition: filter 0.18s;
  border-radius: 50%;
}

.faction-chip:hover img,
.faction-chip.active img {
  filter: brightness(1.3) saturate(1.2);
}

.faction-name {
  font-size: 0.75rem;
  font-weight: 500;
  letter-spacing: 0.03em;
  color: #e6e6eb;
  opacity: 0.9;
  white-space: nowrap;
}

/* ── RARITY CHIPS ─────────────────────────────────────── */
.rarity-star {
  width: 26px;
  height: 26px;
  fill: none;
  stroke: currentColor;
  stroke-width: 1.2;
  transition: fill 0.2s, filter 0.2s;
}

.rarity-chip.common    { color: #4ade80; }
.rarity-chip.epic      { color: #a855f7; }
.rarity-chip.legendary { color: #facc15; }

.rarity-chip.active .rarity-star,
.rarity-chip:hover .rarity-star {
  fill: currentColor;
}

.rarity-chip.active .rarity-star { filter: drop-shadow(0 0 6px currentColor); }
.rarity-chip:hover .rarity-star  { opacity: 0.6; }
.rarity-chip.active:hover .rarity-star { opacity: 1; }

/* ── SEARCH ───────────────────────────────────────────── */
.search-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.search-icon {
  position: absolute;
  left: 9px;
  width: 14px;
  height: 14px;
  color: rgba(255,255,255,0.35);
  pointer-events: none;
}

.search-input {
  width: 100%;
  height: 36px;
  padding: 0 30px 0 30px;
  border-radius: 8px;
  color: #e6e6eb;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  font-size: 0.85rem;
  transition: border-color 0.18s, background 0.18s;
  outline: none;
}

.search-input:focus {
  border-color: rgba(255,255,255,0.28);
  background: rgba(255,255,255,0.08);
}

.search-input::placeholder { color: rgba(255,255,255,0.25); }

.search-clear {
  position: absolute;
  right: 8px;
  background: none;
  border: none;
  color: rgba(255,255,255,0.3);
  cursor: pointer;
  font-size: 0.7rem;
  padding: 2px;
  display: none; /* can be toggled by your existing JS (if any) */
  line-height: 1;
}

.search-clear.visible { display: block; }
.search-clear:hover   { color: rgba(255,255,255,0.7); }

/* ── RESET BUTTON ─────────────────────────────────────── */
.reset-button {
  height: 36px;
  padding: 0 14px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.8rem;
  font-weight: 500;
  color: rgba(255,255,255,0.5);
  background: transparent;
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.18s;
  white-space: nowrap;
}

.reset-button:hover {
  color: #e6e6eb;
  border-color: rgba(255,255,255,0.28);
  background: rgba(255,255,255,0.06);
}

/* If your JS toggles something like .has-active, keep this hook */
.reset-button.has-active {
  color: #e6e6eb;
  border-color: rgba(255,255,255,0.25);
}

/* ── RESPONSIVE ───────────────────────────────────────── */
@media (max-width: 900px) {
  .filter-divider        { display: none; }
  .filter-row--main      { gap: 10px 12px; }
  .filter-group--search  { max-width: 100%; }
}
</style>
